<with-drawer
  #drawer
  [mode]="'over'"
  [disableClose]="true"
  [hasBackdrop]="true"
  width="25vw"
>
  <form
    [ngStyle]="{ padding: '20px' }"
    sideForm
    [formGroup]="editForm"
    (ngSubmit)="onSubmit()"
  >
    <button
      mat-icon-button
      style="float: right"
      type="button"
      (click)="onCloseSideForm()"
    >
      <mat-icon>close</mat-icon>
    </button>

    <mat-form-field style="margin-right: 8px" floatLabel="never">
      <mat-label style="margin-right: 10px" matPrefix>Username </mat-label>
      <input type="text" matInput formControlName="username" />
    </mat-form-field>
    <mat-form-field style="margin-right: 8px" floatLabel="never">
      <mat-label style="margin-right: 10px" matPrefix>Password </mat-label>
      <input type="text" matInput formControlName="password" />
    </mat-form-field>

    <div
      [ngStyle]="{
        display: 'flex',
        justifyContent: 'space-around',
        alignItems: 'center'
      }"
    >
      <button
        mat-raised-button
        type="submit"
        color="primary"
        [disabled]="isSubmitting"
      >
        Submit
      </button>
      <button mat-raised-button type="reset" color="accent">Reset</button>
    </div>
  </form>
  <div style="padding: 20px">
    <h2>{{ title }}</h2>
    <mat-card style="margin-bottom: 10px">
      <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
        <mat-form-field style="margin-right: 8px" floatLabel="never">
          <mat-label style="margin-right: 10px" matPrefix>Username </mat-label>
          <input
            type="text"
            matInput
            placeholder="Search"
            formControlName="username"
          />
        </mat-form-field>

        <mat-form-field style="margin-right: 8px">
          <mat-label style="margin-right: 10px" matPrefix>CreatedAt </mat-label>
          <mat-date-range-input [rangePicker]="picker">
            <input
              matStartDate
              placeholder="Start date"
              (focus)="picker.open()"
              formControlName="from"
            />
            <input
              matEndDate
              placeholder="End date"
              (focus)="picker.open()"
              formControlName="to"
            />
          </mat-date-range-input>
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>

        <button mat-button type="submit" color="primary">
          <mat-icon>search</mat-icon>
          Search
        </button>
        <button mat-button type="reset" color="accent">
          <mat-icon>highlight_off</mat-icon>
          Reset
        </button>

        <button
          mat-icon-button
          type="button"
          (click)="getMany()"
          style="float: right"
        >
          <mat-icon>cached</mat-icon>
        </button>

        <button
          style="float: right"
          mat-icon-button
          type="button"
          (click)="onCreate()"
        >
          <mat-icon>add</mat-icon>
        </button>
      </form>
    </mat-card>
    <mat-card>
      <table style="width: 100%" mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            ID
          </th>
          <td mat-cell *matCellDef="let element">{{ element.id }}</td>
        </ng-container>

        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            Username
          </th>
          <td mat-cell *matCellDef="let element">{{ element.username }}</td>
        </ng-container>

        <ng-container matColumnDef="password">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            Password
          </th>
          <td mat-cell *matCellDef="let element">{{ element.password }}</td>
        </ng-container>

        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            CreatedAt
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.createdAt | date: 'yyyy-MM-dd HH:mm' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="updatedAt">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            UpdatedAt
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.updatedAt | date: 'yyyy-MM-dd HH:mm' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef style="text-align: center">
            Action
          </th>
          <td mat-cell *matCellDef="let element">
            <button mat-icon-button type="button" (click)="onEdit(element)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button type="button" (click)="deleteOne(element)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns"></tr>
      </table>
      <div
        *ngIf="isLoading"
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          background: white;
        "
      >
        <mat-progress-spinner color="primary" mode="indeterminate">
        </mat-progress-spinner>
      </div>
      <mat-paginator
        [length]="total"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        [pageSizeOptions]="[5, 10, 25, 100]"
        (page)="onPaginatorChange($event)"
        aria-label="Select page"
      >
      </mat-paginator>
    </mat-card>
  </div>
</with-drawer>
